@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   Theme Variables / Tokens
   - keep gold limited to CTAs/pricing
   - RGB helpers let us write rgb(var(--rgb-x) / a)
========================= */
:root {
  --color-bg: #111111;            /* charcoal */
  --color-text: #ffffff;
  --color-accent: #D4AF37;        /* gold (CTAs + pricing only) */

  /* disciplined neutrals */
  --ui-accent: #8A8A8A;           /* subtle accents */
  --ui-border: #C6C6C6;           /* borders/dividers */
  --ui-label:  #EDEDED;           /* small text/labels */
  --ui-process:#6B7280;           /* process icons */

  /* RGB helpers */
  --rgb-gold: 212 175 55;
  --rgb-border: 198 198 198;
  --rgb-white: 255 255 255;

  /* header height vars */
  --header-h: 5rem;
}
@media (min-width: 768px){ :root{ --header-h: 6rem; } }
@media (min-width: 1024px){ :root{ --header-h: 7rem; } }

/* Root background & text */
html, body, :root {
  height: 100%;
  background: var(--color-bg);
  color: var(--color-text);
}
* { box-sizing: border-box; }

/* =========================
   Base Typography
========================= */
@layer base {
  html, body { @apply font-body; }
  h1, h2, h3, h4 { @apply font-heading text-white; }
  p, a, li { @apply font-body; }
}
html { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

/* Force Playfair on typewriter spans (no global span rules) */
.typewriter h1, .typewriter h1 *, .typewriter {
  font-family: var(--font-playfair), serif !important;
  font-weight: 600;
  letter-spacing: 0.2px;
}

/* =========================
   Components (consolidated)
========================= */
@layer components {
  /* ---- Buttons ---- */
  .btn {
    @apply relative inline-flex items-center justify-center rounded-xl px-5 py-3 font-medium overflow-hidden;
    @apply transition-[transform,box-shadow,background,color,border] duration-300;
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-black;
    will-change: transform;
  }
  .btn:active { transform: translateY(0); }
  .btn:focus-visible {
    box-shadow: 0 0 0 2px color-mix(in oklab, var(--color-accent) 70%, transparent);
  }

  /* Primary: Solid GOLD */
  .btn-solid {
    @apply shadow-[0_0_0_1px_rgba(212,175,55,0.25)];
    background-color: var(--color-accent);
    color: #000000;
  }
  .btn-solid:hover { @apply -translate-y-[1px]; box-shadow: 0 8px 30px rgb(var(--rgb-gold) / 0.30); }

  /* Secondary: GOLD outline (fills on hover) */
  .btn-outline {
    @apply border text-white;
    border-color: rgb(var(--rgb-gold) / 0.70);
    background-color: transparent;
  }
  .btn-outline:hover { @apply -translate-y-[1px]; background-color: var(--color-accent); color: #000000; }

  /* Legacy aliases (kept for compatibility) */
  .btn-primary { @apply btn btn-solid; }
  .btn-ghost   { @apply btn btn-outline; }

  /* ---- Premium tapered rules ---- */
  /* .rule-cta: Gold tapered line used *only* near CTAs
     - ::before draws the soft thick center via radial-gradient
     - ::after draws a crisp hairline with gentle edge fades */
   .rule-cta {
    --w: clamp(120px, 24vw, 260px);
    width: var(--w);
    height: 1px;
    pointer-events: none;
    background: linear-gradient(90deg,
      rgb(var(--rgb-gold) / 0) 0%,
      rgb(var(--rgb-gold) / 0.65) 12%,
      rgb(var(--rgb-gold) / 0.90) 50%,
      rgb(var(--rgb-gold) / 0.65) 88%,
      rgb(var(--rgb-gold) / 0) 100%);
    box-shadow: 0 0 0.5px rgb(var(--rgb-gold) / 0.7),
                0 0 6px rgb(var(--rgb-gold) / 0.15);
  }

  /* .rule-neutral: Hairline underline that matches the hero’s vibe
     - Subtle glow (box-shadow) to avoid looking too flat */
  .rule-neutral {
    --w: clamp(120px, 24vw, 260px);
    width: var(--w); height: 1px; pointer-events: none;
    background: linear-gradient(90deg,
      rgb(var(--rgb-border) / 0) 0%,
      rgb(var(--rgb-border) / 0.65) 12%,
      rgb(var(--rgb-border) / 0.90) 50%,
      rgb(var(--rgb-border) / 0.65) 88%,
      rgb(var(--rgb-border) / 0) 100%);
    box-shadow: 0 0 0.5px rgb(var(--rgb-border) / 0.7), 0 0 6px rgb(var(--rgb-border) / 0.15);
  }
}

/* Touch: tone down hover motion */
@media (pointer: coarse) {
  .btn:hover { transform: none !important; }
}

/* =========================
   Float Animations
========================= */
@keyframes floatY {
  0%   { transform: translateY(-2px); }
  50%  { transform: translateY(3px); }
  100% { transform: translateY(-2px); }
}
.float-slow { animation: floatY 10s ease-in-out infinite; }
.float-med  { animation: floatY 8s  ease-in-out infinite; }
.float-fast { animation: floatY 6s  ease-in-out infinite; }

/* =========================
   Spotlight layer
   - Overlay for hero/headers (soft radial gradients & glints)
   - pointer-events:none keeps it passive
   - respect prefers-reduced-motion in any animated variants
========================= */
.spotlight { position: absolute; inset: 0; pointer-events: none; }
/* ... (add any spotlight gradients here) ... */

/* Brand helpers */
.bg-deepgray { background: #1a1a1a; }
.bg-midwhite { background: rgb(var(--rgb-white) / 0.20); }
.bg-gold     { background: var(--color-accent); }

/* SECTION DIVIDERS — neutral */
.accent-line  { height: 2px; background: var(--ui-border); }
.accent-arrow { width: 10px; height: 10px; background: var(--ui-border); clip-path: polygon(0 100%, 50% 0, 100% 100%); }

/* Reduce-motion */
@media (prefers-reduced-motion: reduce) {
  .float-slow, .float-med, .float-fast { animation: none !important; }
  .btn-premium__shine { animation: none !important; opacity: .15; }
}

/* =========================
   Premium button shine (only on SOLID)
========================= */
.btn-premium__shine {
  border-radius: 9999px;
  transform: translateX(-120%) skewX(-12deg);
  background: linear-gradient(120deg,
    rgb(var(--rgb-white) / .22) 0%,
    rgb(var(--rgb-white) / .12) 22%,
    rgb(var(--rgb-white) / 0) 60%);
  filter: blur(1px);
  animation: btnShine 4.2s ease-in-out infinite;
  pointer-events: none;
}
.btn-premium:hover .btn-premium__shine { animation-duration: 1.8s; }
@keyframes btnShine {
  0% { transform: translateX(-120%) skewX(-12deg); }
  40%,100% { transform: translateX(180%) skewX(-12deg); }
}

/* Neutral outline button (for secondary actions) */
.btn-outline-neutral {
  border: 1px solid rgb(var(--rgb-border) / 0.7);
  color: #ffffff; background: transparent;
}
.btn-outline-neutral:hover { background: rgb(var(--rgb-white) / 0.06); }
/* Only the solid gold button has a sheen */
.btn-solid .btn-premium__shine { display: block; }
.btn-outline-neutral .btn-premium__shine,
.btn-outline .btn-premium__shine { display: none; }

/* =========================
   Tables & small helpers
========================= */
/* Sticky thead bg (prevents see-through when scrolling) */
.thead-sticky th { position: sticky; top: 0; z-index: 30; }

/* Tiny chart tick helper
   - .vticks hides decorative vertical ticks on small screens */
@media (max-width: 639.98px) { .vticks { display: none; } }

/* Mobile overflow hint: soft edge fades
   - Use on horizontally scrollable containers to hint more content */
.mask-fade {
  -webkit-mask-image: linear-gradient(to right, transparent 0, #000 24px, #000 calc(100% - 24px), transparent 100%);
          mask-image: linear-gradient(to right, transparent 0, #000 24px, #000 calc(100% - 24px), transparent 100%);
}

/* =========================
   Utilities & fallbacks
========================= */
@layer utilities {
  /* nicer multi-line breaks; fallback if balance unsupported */
  .text-balance {
    text-wrap: pretty;   /* fallback */
    text-wrap: balance;  /* modern */
  }
  .overflow-x-clip { overflow-x: clip; }   /* better for compositing than hidden */
  .contain-paint   { contain: paint; }     /* perf: isolate paint */
}

/* Prevent horizontal scrolling from off-canvas visuals */
html, body { overflow-x: hidden; }
@supports (overflow: clip) {
  html, body { overflow-x: clip; }
}

/* =========================
   Layout: container gutters (safe-area aware)
========================= */
.container {
  width: 100%;
  max-width: 120rem;
  margin-inline: auto;
  padding-left:  max(env(safe-area-inset-left),  clamp(16px, 4vw, 32px));
  padding-right: max(env(safe-area-inset-right), clamp(16px, 4vw, 32px));
}
@media (min-width: 1536px) {
  .container {
    padding-left:  max(env(safe-area-inset-left), 40px);
    padding-right: max(env(safe-area-inset-right), 40px);
  }
}
body { margin: 0; }

/* =========================
   Lenis compatibility
   - keeps native scroll semantics so sticky works
========================= */
html.lenis, html.lenis body { height: auto; }
.lenis.lenis-smooth { scroll-behavior: auto !important; }
.lenis.lenis-stopped { overflow: hidden; }
#lenis-content { position: relative; z-index: 0; }

/* =========================
   Debug helper
   - apply to a wrapper if sticky acts weird
   (removes transforms/filters that break containing blocks)
========================= */
.debug-no-sticky-break {
  transform: none !important;
  filter: none !important;
  backdrop-filter: none !important;
  overflow: visible !important;
}

/* =========================
   Table/row adornments
========================= */
/* Featured row: neutral fill + thin gold accent line */
.row-active {
  position: relative;
  background: rgb(var(--rgb-white) / 0.035);
}
.row-active::before {
  content: "";
  position: absolute; left: 0; top: 12px; bottom: 12px; width: 2px; border-radius: 2px;
  background: linear-gradient(180deg,
    rgb(var(--rgb-gold) / 0),
    rgb(var(--rgb-gold) / 0.7),
    rgb(var(--rgb-gold) / 0));
}
